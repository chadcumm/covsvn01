<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta name="discern" content="CCLLINK,CCLNEWWINDOW,CCLEVENT,CCLEKSREPLYOBJECT,MPAGES_EVENT,APPLINK,XMLCCLREQUEST">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Pending Medication Reconciliation</title>
			<script type="text/javascript">
			try {
				patobj = {};
					patobj.patientDataSplit = "@MESSAGE:[PATIENTDATA]";
					patobj.patientData = patobj.patientDataSplit.split("|");
 
					patobj.patientID = patobj.patientData[0];
					patobj.encounterID = patobj.patientData[1];
			}catch (err) {
				alertErrorMessage('Patient Data from rule', err);
			}
 
 
			function callMPEvent() {
				//alert("Mpage Event to Fire");
				var eid = patobj.encounterID;
				var pid = patobj.patientID;
				var recontype = "@MISC:{CCLScript}";
				//alert("UserID :" + recontype);
				//alert("Encounter ID " + eid + "Person ID " + pid);
				//var criterion = this.getCriterion();
 
				var mrObject = new Object();
 				mrObject = window.external.DiscernObjectFactory("ORDERS");;
				mrObject.PersonId = pid;
				mrObject.EncntrId = eid;
				mrObject.defaultVenue =     4055135.00 ; //inpatient
				mrObject.reconciliationMode = recontype; //admit
				mrObject.LaunchOrdersMode(2,0,0);
 				CCLEVENT("EVENT_EKS_OK", "");
				//var mr_params = pid + "|" + eid + "|" +
 
			}
 
 
		 </script>
	</head>
		<body>
 
			<h1><a href="javascript:callMPEvent();">Click to Launch Medication Reconciliation Admission <a/>
 
		</body>
</html>
