;cov_rectest_Mock.tst


 ;Call Echorecord(reqinfo) Go
 
;  Call Echorecord(request) Go

;cov_eks_get_codeblue "mine" go

;cov_test_rule_ccl "mine" go

cov_eks_get_interp_req "mine" go

;cov_phq_flu_ekm_adhoc  "mine" go

;cov_sz_codeblue_ekm "mine" go

;cov_phq_deaf_hoh_interp_log "mine", "02-AUG-2022 00:00:00", "29-AUG-2022 23:59:00" , 2552503645.00 go
 
;cov_dsch_medrec_alert_tracking "mine", "22-FEB-2022 00:00:00", "22-FEB-2022 23:59:00", 2552503645.00 go
 
;cov_phq_flu_ekm_ops "mine" go
 
;cov_medrec_alert_dismiss_ekm "mine" go
 
;cov_phq_midnight_census "mine", "03-AUG-2021 00:00:00", "03-AUG-2021 00:00:00" go
 
;cov_phq_covid_vaccin_status "mine", "16-JUL-2021 00:00:00", "16-JUL-2021 23:59:00", 2552503645.00 go   ;FSR
 
;cov_phq_leader_safety_round "mine", 2552511121.00, 2552511121.00  go
 
;cov_gstest3 "mine",  2552503645.00,  2552511121.00 go; c1 ; 3222927715.00 go
 
;cov_chg_before_livepat "mine", "02-JUN-2021 00:00:00", "02-JUN-2021 23:59:00",  2552503645.00,0.0 go
 
;cov_chg_preop_unit_rule "mine" go
 
;cov_phq_critical_result_test "mine", "04-MAY-2021 00:00:00", "04-MAY-2021 23:59:00", 3144505.00,0.0 go
 
;cov_phq_chg_mrsa_feed "mine", "02-AUG-2021 00:00:00", "02-AUG-2021 23:59:00",  2552503645.00,0.0 go
 
;cov_phq_mrsa_hist_load "mine", "01-JUL-2021 00:00:00", "01-JUL-2021 23:59:00",  2552503645.00 go
 
;cov_gstest4 "mine", "01-JUN-2021 00:00:00", "01-JUN-2021 23:59:00",  2552503645.00 go
 
;cov_gstest2 "mine" go
 
;cov_rule_dsch_medrec "mine" go
 
;cov_gl_amerigroup_rule "mine" go
 
;cov_ic_misc_covid_cog_low "mine" go
 
;cov_ina_medrec_rule  "mine" go
 
;cov_case_medrec_rule "mine" go
 
;cov_gstest2 "mine" go
 
;cov_vte_session_validation "mine" go
 
;cov_dsch_medrec_ekm  "mine" go
 
;cov_dsch_medrec_rule  "mine" go
 
;cov_ina_medrec_rule  "mine" go
 
;
;cov_ic_aod_feed "mine","20-FEB-2021 00:00:00", "28-FEB-2021 23:59:00" go
 
;cov_phq_pat_isolation_det "mine", "01-NOV-2020 00:00:00", "28-FEB-2021 23:59:00",2553765531 go
 
;cov_phq_ltc_resident_covid "mine", "13-JAN-2021 00:00:00", "19-JAN-2021 23:59:00",2, 2553765707.00 GO ;FSR TCU
 
;cov_gstest2 "mine", "01-JAN-2021 00:00:00", "21-JAN-2021 23:59:00", 0.0 GO
 
;cov_bh_gad7_phq9_doc "mine", "09-FEB-2021 00:00:00", "16-FEB-2021 23:59:00", 2, 2553766315.00 GO
 
;cov_gstest4 "mine", "01-JAN-2021 00:00:00", "30-MAR-2021 23:59:00", 2553766299.00 go
 
 ;cov_ic_misc_covid19_task "mine", "01-SEP-2020 00:00:00", "03-SEP-2020 23:59:00", 2, 2552503645.00  go
 
;cov_phq_cvl_activity "mine", 2552503645.00, "01-SEP-2020 00:00:00", "09-SEP-2020 23:59:00"  go
 
;cov_phq_sepsis_alert "mine", 2552503645.00 go
 
;cov_bh_treat_plan_op_mtp "mine", 2553765603.00
 
;cov_phq_insulin_drip_result "mine", 2552503613 go ;2552503645.00 go
 
;cov_phq_bcmafrog_scorecard_tmp "mine", "01-MAY-2020 00:00:00", "31-MAY-2020 23:59:00" go
 
;cov_phq_LTC_expired_covid19 "mine", "01-JAN-2020 00:00:00", "30-MAY-2020 23:59:00" go
 
;cov_amb_tog_bcma_prsnl_det "mine", "09-JUN-2020 00:00:00", "09-JUN-2020 10:30:00",  2557548517.00 go
 
;cov_bh_suicide_status_rule "mine" go
 
;cov_phq_fema_hhs_covid_testing "mine" , 2552503645.00 go
 
;cov_sn_surgery_covid_dashboard "mine", "08-MAY-2020 00:00:00", "09-MAY-2020 23:59:00", 2552503645.00  go
 
;cov_gstest_prompt_form "mine", "07-MAY-2020 00:00:00", "07-MAY-2020 23:59:00", value(2552503645.00),value(1644765.00) go
 
;cov_autoset_bh_locations "mine" go
 
;cov_phq_aod_print_feed_ops "mine", "18-AUG-2020 10:00:00", "19-AUG-2020 11:59:00" go
 
;cov_phq_mobile_transport_adhoc "mine", '2005503346', 2552503645.00 go
 
;cov_phq_nozin_compliance "mine", "26-FEB-2020 00:00:00", "27-FEB-2020 23:59:00", 2552503645.00 go
 
;cov_phq_nozin_rule_orders "mine", "05-FEB-2020 00:00:00", "10-FEB-2020 23:59:00", 2552503645.00 go
 
;cov_pha_med_wastage  "mine", "12-JAN-2020 00:00:00", "14-JAN-2020 23:59:00", 2552503653.00 go
 
;cov_phq_admission_hist_disch "mine", "08-AUG-2020 00:00:00", "12-AUG-2020 23:59:00", 2553765475.00,  2557556147.00 go
 
;cov_phq_expired_patients "mine", "12-JAN-2020 00:00:00", "14-JAN-2020 23:59:00", 2552503653.00 go
 
;cov_phq_columbia_suicide_doc "mine", "01-NOV-2019 00:00:00", "02-NOV-2019 23:59:00", 2552503645.00 go
 
;cov_phq_admission_hist "mine", "28-OCT-2019 00:00:00", "31-OCT-2019 23:59:00", 21250403.00 go
 
;cov_phq_disch_diagnosis "mine", "28-OCT-2019 00:00:00", "31-OCT-2019 23:59:00", 21250403.00 go
 
;cov_rad_tech_orders "mine", "10-OCT-2019 00:00:00", "12-OCT-2019 23:59:00", 21250403.00 go
 
;cov_phq_stroke_gwtg_feed "mine", "01-SEP-2019 00:00:00", "05-SEP-2019 23:59:00", 21250403.00 go
 
;cov_phq_expired_patients "mine", "01-SEP-2019 00:00:00", "15-SEP-2019 23:59:00", 2552503635.00 go
 
;cov_phq_bcma_overall "mine", 2554055109.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00" go
 
;cov_phq_bcma_prsnl_detail "mine", 2554055109.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00", value(2552509009.00, 2552509149.00) go
 
;cov_phq_bcma_prsnl_detail "mine", 2554055109.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00",  2552509009.00 go
 
;cov_oc_tog_lab_orders "mine", "25-JUL-2019 00:00:00", "29-JUL-2019 23:59:00", 2553765659.00 go
 
;cov_pha_item_cost_extract "mine" go
 
;cov_pha_discharge_rx_ops go; "24-JUL-2019 00:00:00", "24-JUL-2019 23:59:00", 0, "", value(0), 0
 
;cov_phq_rrt_codelog  "mine", "26-JUL-2019 00:00:00", "29-JUL-2019 23:59:00", 2552503635 go
 
;cov_phq_rrt_stroke_res  "mine", "29-JUL-2019 00:00:00", "29-JUL-2019 23:59:00", 2552503635 go
 
;cov_phq_code_blue_responses "mine", "29-JUL-2019 00:00:00", "29-JUL-2019 23:59:00", 2552503635 go
 
;cov_pha_synonymId_extract "mine" go
 
;cov_external_data_into_ccl "mine" go
 
;cov_amb_tog_bcma_prsnl_det "mine", "08-JUL-2019 00:00:00", "11-JUL-2019 23:59:00",  2557548517.00 go
 
;cov_lab_thawed_notused "mine", "01-JUL-2019 00:00:00", "05-JUL-2019 23:59:00" go
 
;cov_pha_scorecard_phys_updt "mine", "24-JUN-2019 00:00:00", "24-JUN-2019 23:59:00", 2552503635 go
 
;cov_pha_medadmin_validation "mine", "24-JUN-2019 00:00:00", "24-JUN-2019 23:59:00", 2552503613.00 go
 
;cov_pha_scorecard_phys_updt "mine" go
 
;cov_phq_bcma_cpoe_scorecard "mine", "24-MAY-2019 00:00:00", "24-MAY-2019 23:59:00" go
 
;cov_phq_CPOE_validation "mine", "25-APR-2019 00:00:00", "25-APR-2019 23:59:00", 2552503613 go
 
;cov_phq_bcma_lfrog_scorecard "mine", "29-OCT-2019 00:00:00", "29-OCT-2019 23:59:00" go
 
;cov_phq_patient_dashboard "mine",  2555128693.00 go ;2552503897.00 go ;lcmc 3m
 
;cov_phq_critical_result_note "mine", 2552503613, "17-MAR-2019 00:00:00", "23-MAR-2019 23:59:00" go
 
;cov_pha_user_prod_hx_load "mine", 1.0,  "08-MAR-2019 00:00:00", "08-MAR-2019 23:59:00" go
 
;cov_phq_bcma_prsnl_detail "mine", 2554055109.00, "29-OCT-2019 00:00:00", "29-OCT-2019 23:59:00",  2560500565.00 go
 
;cov_pha_discharge_rx_meds "mine", "11-DEC-2019 00:00:00", "12-DEC-2019 23:59:00", 21250403.00 go
 
;cov_phq_suicide_risk_assment "mine", "16-SEP-2019 00:00:00", "17-SEP-2019 23:59:00", 2552503645.00 go
 
;cov_phq_BCMA_leapfrog_overall "mine", 2552503635, 2019, 01 go ;FLMC
 
;cov_phq_pain_reassessment "mine", "28-JAN-2019 00:00:00", "02-FEB-2019 23:59:00", 2555128693.00 go ; mmc 2w
 
;cov_phq_sepsis_dream_test "mine", "13-OCT-2019 00:00:00", "15-OCT-2019 23:59:00", 2552503649.00, 1 go
 
;cov_pha_scorecard_frequ_load "mine", "02-SEP-2018 00:00:00", "02-SEP-2018 23:59:00", 2552503645.00 go
 
;cov_pha_scorecard_charges "mine", 0, "06-DEC-2018 00:00:00", "06-DEC-2018 23:59:00", 2553765579.00 go
 
;cov_pha_scorecard_extract "mine" , 0, "01-JUL-2019 00:00:00", "01-JUL-2019 23:59:00", 2552503613.00  go
 
;cov_pha_pharmacy_productivity "mine"  go
 
;cov_ina_diet_worksheet_ops go
 
;cov_phq_Influenza_immu_alert "mine", "11-OCT-2019 00:00:00", "13-OCT-2019 23:59:00", value(2552503645.00) go
 
;cov_pha_extract_peninsulaFix "mine", "25-JUL-2018 00:00:00", "25-JUL-2018 23:59:00" go
 
;cov_idn_st_amb_meds_admin "mine" go ;110454714.00 ;request->visit[1].encntr_id
 
;cov_pha_bloodGlucose_heparin "mine", "24-JUL-2018 00:00:00", "31-JUL-2018 23:59:00", value(1), value(2552503645.00) go
 
;cov_phq_tob_assessment "mine", "20-JUL-2018 00:00:00", "31-JUL-2018 23:59:00", value(2552503613.00) go
 
;cov_phq_contsubsta_detail "mine", value(2553455457.00) go
 
;cov_phq_contrld_substa_audit "mine", value(2553455457.00), "22-MAY-2018 23:59:00", "29-JUN-2018 23:59:00" go
 
;cov_phq_contsubsta_cosign "mine", value(2553455457.00), "25-JUN-2018 00:00:00", "02-JUL-2018 23:59:00" go
 
;cov_gstest2 "mine", "25-JUN-2018 00:00:00", "06-JUL-2018 23:59:00", value(2552503649.00) go
 
;cov_phq_contsubsta_cosign "mine" go
 
;cov_phq_lwbs_form "mine", "25-JuN-2018 00:00:00", "25-JUN-2018 23:59:00", value(2552503649.00) go
 
;cov_phq_teamHealth_ed "mine", "20-AUG-2018 00:00:00", "22-AUG-2018 23:59:00", value(2552503645.00) go
 
;cov_phq_restraint_document_log "mine", 2552503613.00 , "22-MAY-2018 00:00:00", "30-JUN-2018 23:59:00" go
 
;cov_wh_delivery_summary "mine", "1814200200" go ;"1808200049"
 
;cov_ina_dietitian_worksheet "mine", value(2552503645.00) go
 
;cov_wh_Newborn_FollowUp "mine" , "1815300662" go
 
;cov_promptlibrary go
 
;cov_wh_perinatallowapgar "mine", 2552503613.00 , "30-NOV-2010 00:00:00", "30-NOV-2017 23:59:00" go
 
;cov_ic_LinesTubesDrains "mine", "01-JAN-2017 00:00:00", "18-JAN-2018 23:59:00", value(2552503649.00, 2552503613.00) go
 
;cov_ic_LinesTubesDrains "mine", "22-MAY-2018 00:00:00", "30-MAY-2018 23:59:00", value(2552503649.00) go
 
;cov_pha_Productivity_stats "mine", "01-DEC-2017 00:00:00", "31-DEC-2017 23:59:00", value(2552503613.00) go
 
;cov_pha_Productivity_extract "mine" go ;, "01-DEC-2017 00:00:00", "31-DEC-2017 23:59:00", value(2552503613.00) go
 
;cov_cpm_chartAbstraction "mine" go
 
;cov_cpm_chartAbstraction_csv "mine", "19-JUN-2018 00:00:00", "30-JUN-2018 23:59:00", value( 2568269229.00, 2568269335.00) go
 
;cov_oc_clinical_trial "mine" , "01-APR-2018 00:00:00", "28-APR-2018 23:59:00", value(2553765659.00), value("C43.57") go
 
;cov_phq_restraint_expired_pat "mine", "02-AUG-2019 00:00:00", "05-AUG-2019 23:59:00", 2552503635.00 go
 
;cov_phq_adiction_ref_rule go
 
;cov_pha_scorecard_extract "mine", value(0), "12-NOV-2018 00:00:00", "13-nov-2018 23:59:00" go
 
;cov_gstest "mine", "10-DEC-2018 00:00:00", "10-DEC-2018 23:59:00" , 2552503645.00, 3,'215' go
 
;cov_gstest2 "mine" go
 
;cov_gstest2 "mine" , "01-SEP-2018 00:00:00", "02-SEP-2018 23:59:00" go
 
;cov_gstest2 "mine" , value(2552503645.00) go
 
;cov_gstest2 "mine", "08-MAR-2019 00:00:00", "10-MAR-2019 23:59:00", 2552505625.00 go
 
;cov_gstest2 "mine",  value(2552503613.00), "22-JUL-2018 00:00:00", "22-JUL-2018 23:59:00" go
 
;Cov_gstest2 "mine",  value(2552503613.00), "10-OCT-2018 00:00:00", "15-OCT-2018 23:59:00", 1 go
 
;cov_gstest2 "mine" , 0, "01-SEP-2018 00:00:00", "02-SEP-2018 23:59:00", 2552503653.00  go
 
;cov_gstest2 "mine", "28-JAN-2019 00:00:00", "02-FEB-2019 23:59:00", 2555128693.00 go ; mmc 2w
 
;cov_gstest2 "mine", "08-MAR-2019 00:00:00", "08-MAR-2019 23:59:00", 2555128693.00 go
 
;cov_gstest2 "mine", "15-SEP-2020 00:00:00", "15-SEP-2020 23:59:00", value(2552503645.00),1 go
 
;cov_gstest2 "mine", 2552503635.00, "18-JAN-2020 00:00:00", "18-JAN-2020 23:59:00" go
 
;cov_gstest3 "mine" go
 
;cov_gstest3 "mine", "04-MAY-2020 00:00:00", "04-MAY-2020 23:59:00", 644372.00,12407582.00  go
 
;cov_gstest3 "mine", 2555128693.00  go
 
;cov_gstest3 "mine", "16-FEB-2020 00:00:00", "18-FEB-2020 23:59:00" GO
 
;cov_gstest3 "mine", 2554055109.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00", value(2552509149.00) go
 
;cov_gstest3 "mine", 2554055109.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00", '*' go
 
;cov_gstest3 "mine", "30-JAN-2020 07:00:00", "31-JAN-2020 06:59:00", 2552503613.00 go
 
;cov_gstest3 "mine",  value(2552503613.00), "10-OCT-2018 00:00:00", "15-OCT-2018 23:59:00", 1 go
 
;cov_gstest3 "mine", "21-OCT-2018 00:00:00", "24-OCT-2018 23:59:00", value(2553765571) go
 
;cov_gstest3 "mine", "19-JUN-2018 00:00:00", "30-JUN-2018 23:59:00", value(2568269229.00, 2568269335.00) go
 
;cov_gstest3 "mine", 2552503613.00, "01-MAR-2019 00:00:00", "01-MAR-2019 23:59:00" go
 
;cov_gstest3 "mine", 2552503645.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00" go
 
;cov_gstest3 "mine", "01-APR-2019 00:00:00", "01-APR-2019 23:59:00", 1 go
 
;cov_gstest3 "mine", "09-OCT-2019 00:00:00", "09-OCT-2019 23:59:00", 2552503645.00, 1 go
 
;cov_gstest3 "mine", "01-APR-2019 00:00:00", "15-SEP-2019 23:59:00", 2552503635.00 go
 
;cov_gstest3 "mine", "30-SEP-2019 00:00:00", "01-OCT-2019 23:59:00", 2552509009.00 go ;PW 3C
 
;cov_gstest3 "mine", "26-MAY-2020 00:00:00", "27-MAY-2020 23:59:00" go
 
;cov_gstest3 "mine", "15-SEP-2020 10:00:00", "15-SEP-2020 11:59:00", 0 go
 
;cov_gstest4 "mine", value(21250403.00) go
 
;cov_gstest4 "mine", "01-OCT-2018 00:00:00", "05-OCT-2018 23:59:00", value(1) go;value(2552503645.00) go
 
;cov_gstest4 "mine", "01-SEP-2018 00:00:00", "07-SEP-2018 23:59:00", value(q2), value(2018) go
 
;cov_gstest4 "mine", "01-SEP-2018 00:00:00", "18-SEP-2018 23:59:00", value(2552503613.00) go
 
;cov_gstest4 "mine", value('q2'), value(2018) go
 
;cov_gstest4 "mine", 2552503613.00, 2019, 01 go
 
;cov_gstest4 "mine", value(1618674.00), value(1618672.00), "08-MAY-2020 00:00:00", "08-MAY-2020 23:59:00" go
 
;cov_gstest4 "mine", "20-AUG-2020 00:00:00", "20-AUG-2020 23:59:00", 2553765475.00,  2557556147.00 go
 
;cov_gstest4 "mine", 2552503613.00, "15-SEP-2020 00:00:00", "25-SEP-2020 23:59:00" go
 
;cov_gstest5 "mine", "15-DEC-2019 00:00:00", "17-DEC-2019 23:59:00", 2552503649.00 go
 
;cov_gstest5 "mine", "01-JUL-2019 00:00:00", "05-JUL-2019 23:59:00" go
 
;cov_gstest5 "mine" , 0, "08-JUL-2019 00:00:00", "08-JUL-2019 23:59:00", 2552503639.00  go
 
;cov_gstest5 "mine", 2554055109.00, "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00" go
 
;cov_gstest5 "mine", 3144499.00, "16-JUN-2019 00:00:00", "22-JUN-2019 23:59:00" go
 
;cov_gstest5 "mine", "13-NOV-2019 00:00:00", "14-NOV-2019 23:59:00", 2552503645.00 go
 
;cov_gstest5 "mine" go
 
;cov_gstest5 "mine", "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00",  2553765947.00 go
 
;cov_gstest6 "mine", "08-MAY-2020 00:00:00", "09-MAY-2020 23:59:00", value(2552503645.00, 2552503649.00) go
 
;cov_gstest6 "mine", "01-SEP-2019 00:00:00", "05-SEP-2019 23:59:00", 2552503613.00, 0 go
 
;cov_gstest6 "mine", "09-SEP-2019 00:00:00", "09-SEP-2019 23:59:00" go
 
 
;******************************************************************************************************************
 
;with nocounter, separator=" ", format, uar_code(d,1), format(date,"mm-dd-yyyy hh:mm:ss;;d"), time = 120
 
;,age_years = build2(piece(trim(cnvtage(p.birth_dt_tm), 3), ' ', 1, "#UNDEF"),'Years')
 
;with nocounter, format, separator = "", format(date,"mm-dd-yyyy hh:mm:ss;;d")
 
;with nocounter, separator=" ", format
 
;with format(date,";;q"),uar_code(d,1)
 
;with format(date,"dd-mmm-yyyy"),uar_code(d)
 
 
;where o.orig_order_dt_tm between cnvtdatetime("10-MAY-2018 00:00:00") and cnvtdatetime("30-MAY-2018 23:59:00")
 
;and e.reg_dt_tm between cnvtdatetime("25-JUN-2018 00:00:00") and cnvtdatetime("02-JUL-2018 23:59:00")
 
;and oa.order_dt_tm BETWEEN CNVTDATETIME(CURDATE-1, CURTIME3) AND CNVTDATETIME(CURDATE , CURTIME3)
 
;and e.reg_dt_tm between cnvtdatetime($start_datetime) and cnvtdatetime($end_datetime)
 
;call echorecord(tob)
;call echojson(tob, "rec.out", 0)
;call from a rule by using request record structure ==> call echojson(request, "eks_request_data.json") go
 
 
/*Facility code value - loc-facility_cd
 21250403.00    ;FSR
 2552503613.00, ;MMC
 2553765579.00  ;G
 2552503635.00, ;FLMC
 2552503639.00, ;MHHS
 2552503645.00, ;PW
 2552503649.00, ;RMC
 2552503653.00, ;LCMC
 ;2552503657.00 ;CMC
 
;l.facility_accn_prefix_cd = $acute_facilities
 
 2554055139.00	08	FLMC
 2553225851.00	01	FSR
 2553225859.00	06	LCMC
 2554055089.00	03	MHHS
 2554055117.00	04	MMC
 2554055109.00	02	PWMC
 2554055131.00	05	RMC
 
Strata facility code
2552503613.00 = '24' ;MMC
2553765579.00 = '65' ;G
2552503635.00 = '28' ;FLMC
2552503639.00 = '25' ;MHHS
2552503645.00 = '22' ;PW
2552503649.00 = '27' ;RMC
2552503653.00 = '26' ;LCMC
 
;Org id's
  675844.00	Fort Sanders Regional Medical Center
  3144499.00	Methodist Medical Center
  3144501.00	Fort Loudoun Medical Center
  3144502.00	Morristown-Hamblen Healthcare System
  3144503.00	Parkwest Medical Center
  3144504.00	Roane Medical Center
  3144505.00	LeConte Medical Center
  3234074.00	Peninsula Behavioral Health - Div of Parkwest Medical Center
 
 
;Facility variable
if(substring(1,1,reflect(parameter(parameter2($facility_pmpt),0))) = "l");multiple values were selected
	set opr_fac_var = "in"
elseif(parameter(parameter2($facility_pmpt),1)= 0.0)	;all[*] values were selected
	set opr_fac_var = "!="
else									;a single value was selected
	set opr_fac_var = "="
endif
 
;nurse unit variable
if(substring(1,1,reflect(parameter(parameter2($nurse_unit_pmpt),0))) = "l");multiple values were selected
	set opr_nu_var = "in"
elseif(parameter(parameter2($nurse_unit_pmpt),1)= 0.0) ;all[*] values were selected
	set opr_nu_var = "!="
else									 ;a single value was selected
	set opr_nu_var = "="
endif
 
 
where operator(e.loc_facility_cd, operate_fac_var, $acute_facility_list)
and operator(e.loc_nurse_unit_cd, operate_nu_var, $nurse_unit)
 
 
/*****************************************************************************
  Covenant Health Information Technology
  Knoxville, Tennessee
******************************************************************************
 
	Author:			Geetha Paramasivam
	Date Written:		Feb'22
	Solution:			All
	Source file name:	      cov_dsch_medrec_alert_tracking.prg
	Object name:		Nursing/Case management
	Request#:			10022
 	Program purpose:	      Part of Discharge Med rec rule
 	Executing from:		Rule
  	Special Notes:
 
******************************************************************************
  GENERATED MODIFICATION CONTROL LOG
******************************************************************************
 
Mod Date	Developer			Comment
----------	--------------------	------------------------------------------
 
******************************************************************************/
 
 
;------------------------------------------------
;Convert ce.result_val into a date
;death_chart_dt = format(cnvtdatetime(cnvtdate2(substring(3,8,ce.result_val),"YYYYMMDD")
 
; result_val_dt = format(cnvtdatetime(cnvtdate2(substring(3,8,ce.result_val),"YYYYMMDD")
;				,cnvtint(substring(11,6,ce.result_val))),"MM/dd/yyyy hh:mm;;d")
 
;------------------------------------------------
 
;with nocounter, separator=" ", format, outerjoin = d1
 
;with nocounter, separator=" ", format, uar_code(d,1), format(date,"mm-dd-yyyy hh:mm:ss;;d")
 
;with nocounter, separator=" ", format
 
;with format(date,";;q"),uar_code(d,1)
 
;,age_years = build2(piece(trim(cnvtage(p.birth_dt_tm), 3), ' ', 1, "#UNDEF"),'Years')
 
;To send secure email add this in the subject line ==> Subject: [SECURE]
 
;----------------------------------------------------------------------------------------
;Alter the 2 level RS to max size
/* 
for(rs_lcnt = 1 to size(pat->plist, 5))
  set rs_max_size = 1
  if(size(pat->plist[rs_lcnt].line, 5) > rs_max_size)
    set rs_max_size = size(pat->plist[rs_lcnt].line, 5)
  endif
 
  set stat = alterlist(pat->plist[rs_lcnt].line, rs_max_size)
endfor
 
; 2 & 3rd level
declare lCnt = i4 with noconstant(0), protect
declare max_size = i4 with noconstant(0), protect
 
for(lCnt = 1 to size(enc->qual, 5))
  set max_size = 1
  if(size(enc->qual[lCnt].allergies, 5) > max_size)
    set max_size = size(enc->qual[lCnt].allergies, 5)
  elseif(size(enc->qual[lCnt].problems, 5) > max_size)
    set max_size = size(enc->qual[lCnt].problems, 5)
  endif
 
  set stat = alterlist(enc->qual[lCnt].allergies, max_size)
  set stat = alterlist(enc->qual[lCnt].problems, max_size)
endfor
 
COMPARE TWO DATES 
The datetimecmp() function compares two datetime values ignoring the
time and returns the difference in a number of days. You can use
datetimecmp() in qualifications. For example:

Where datetimecmp(E.DISCH_DT_TM , PC.CASE_COLLECT_DT_TM) >= 1 
 
;----------------------------------------------------------------------------------------------------------------
 
 
 
***************** RULE / CCL  ***********************************************************
 
call echojson(opt_orderlist, "opt_order_list.json") go

call echojson(request, "eks_request_data.json") go
 
EKS_EXEC_CCL_L
 
log_message (vc): Message that will appear in EKS_MONITOR for this template
 
log_misc1 (vc): eksdata->tqual[tcurindex]->qual[curindex].data[1].misc
 
When using the log_misc1 expression, only one item is populated in eksdata->tqual[3]->qual[curindex]->data, in the first position.
If needing to populate several items in the eksdata->tqual[3]->qual[curindex]->data, the log_set_misc_ind expression must be set to 1.
Once set, eksdata->tqual[3]->qual[curindex]->data can be populated. Ensure that the first item is one of the following headers to
allow subsequent EKS templates to access the list of items.
 
*/
 
 

